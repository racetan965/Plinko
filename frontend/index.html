<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ø¨Ù„Ù†ÙƒÙˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      background: radial-gradient(circle at top, #0f172a, #000);
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #fff;
    }
    .box {
      background: rgba(15, 23, 42, 0.9);
      padding: 24px;
      border-radius: 20px;
      width: 90%;
      max-width: 360px;
      text-align: center;
      border: 1px solid #38bdf8;
      box-shadow: 0 16px 50px rgba(0,0,0,0.9);
    }
    h2 {
      margin-bottom: 8px;
    }
    p {
      margin-bottom: 12px;
      font-size: 14px;
      color: #cbd5f5;
    }
    input {
      width: 100%;
      padding: 11px;
      margin-top: 10px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      outline: none;
    }
    button {
      width: 100%;
      padding: 11px;
      margin-top: 18px;
      border: none;
      border-radius: 999px;
      background: linear-gradient(135deg, #22c55e, #a3e635);
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      color: #02131b;
    }
    #error {
      color: #f87171;
      margin-top: 10px;
      font-size: 13px;
      min-height: 18px;
    }
  </style>
</head>
<body>
  <div class="box">
    <h2>ğŸ® ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù„Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©</p>

    <input id="username" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">

    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>

    <div id="error"></div>
  </div>

<script>
async function login() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const errorBox = document.getElementById("error");
  errorBox.textContent = "";

  if (!username || !password) {
    errorBox.textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
    return;
  }

  try {
    const res = await fetch("/api/login", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ username, password })
    });

    const data = await res.json();

    if (!data.ok) {
      errorBox.textContent = data.error || "Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
      return;
    }

    // Ø­ÙØ¸ session_token
    localStorage.setItem("session_token", data.session_token);
    localStorage.setItem("username", username);
    // ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø¹Ø¨Ø©
    window.location.href = "/plinko.html";
  } catch (err) {
    errorBox.textContent = "Ù…Ø´ÙƒÙ„Ø© Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±";
  }
}
</script>
</body>
</html>
